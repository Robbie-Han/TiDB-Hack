<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Fruchterman 布局参数变化</title>
    <style>::-webkit-scrollbar{display:none;}html,body{overflow:hidden;margin:0;}</style>
</head>
<style>
    .g6-tooltip {
        border: 1px solid #e2e2e2;
        border-radius: 4px;
        font-size: 12px;
        color: #545454;
        background-color: rgba(255, 255, 255, 0.9);
        padding: 10px 8px;
        box-shadow: rgb(174, 174, 174) 0px 0px 10px;
    }
</style>
<body>
<div id="mountNode"></div>
<script>/*Fixing iframe window.innerHeight 0 issue in Safari*/document.body.clientHeight;</script>
<script src="https://gw.alipayobjects.com/os/antv/pkg/_antv.g6-3.1.0/build/g6.js"></script>
<script>
    /**
     * 该示例演示 Fruchterman 布局的参数及其使用，以及布局参数的切换
     * Fruchterman 算法原文：http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.13.8444&rep=rep1&type=pdf
     * by 十吾
     */

    /**
     * 该示例演示 Fruchterman 布局的参数及其使用，以及布局参数的切换
     * Fruchterman 算法原文：http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.13.8444&rep=rep1&type=pdf
     * by 十吾
     */
    var data = {
        nodes: [{
            id: "0",
            label: "hello",
            cluster: "a",
            description: 'This is node-3.',
            style: {
                lineWidth: 2,
                fill: 'red'
            }
        }, {
            id: "1",
            label: "world",
            cluster: "a",
            x:400,
            y:400
        }, {
            id: "2",
            label: "2"
        }, {
            id: "3",
            label: "3",
            cluster: "a"
        }, {
            id: "4",
            label: "4",
            cluster: "a"
        }, {
            id: "5",
            label: "5",
            cluster: "a"
        }, {
            id: "6",
            label: "6",
            cluster: "a"
        }, {
            id: "7",
            label: "7",
            cluster: "a"
        }, {
            id: "8",
            label: "8",
            cluster: "a"
        }, {
            id: "9",
            label: "9",
            cluster: "a"
        }, {
            id: "10",
            label: "10",
            cluster: "a"
        }, {
            id: "11",
            label: "11",
            cluster: "a"
        }, {
            id: "12",
            label: "12",
            cluster: "a"
        }, {
            id: "13",
            label: "13",
            cluster: "b"
        }, {
            id: "14",
            label: "14",
            cluster: "b"
        }, {
            id: "15",
            label: "15",
            cluster: "b"
        }, {
            id: "16",
            label: "16",
            cluster: "b"
        }, {
            id: "17",
            label: "17",
            cluster: "b"
        }, {
            id: "18",
            label: "18",
            cluster: "c"
        }, {
            id: "19",
            label: "19",
            cluster: "c"
        }, {
            id: "20",
            label: "20",
            cluster: "c"
        }, {
            id: "21",
            label: "21",
            cluster: "c"
        }, {
            id: "22",
            label: "22",
            cluster: "c"
        }, {
            id: "23",
            label: "23",
            cluster: "c"
        }, {
            id: "24",
            label: "24",
            cluster: "c"
        }, {
            id: "25",
            label: "25",
            cluster: "c"
        }, {
            id: "26",
            label: "26",
            cluster: "c"
        }, {
            id: "27",
            label: "27",
            cluster: "c"
        }, {
            id: "28",
            label: "28",
            cluster: "c"
        }, {
            id: "29",
            label: "29",
            cluster: "c"
        }, {
            id: "30",
            label: "30",
            cluster: "c"
        }, {
            id: "31",
            label: "31",
            cluster: "d"
        }, {
            id: "32",
            label: "32",
            cluster: "d"
        }, {
            id: "33",
            label: "33",
            cluster: "d"
        }],
        edges: [{
            source: "0",
            target: "1"
        }, {
            source: "0",
            target: "2"
        }, {
            source: "0",
            target: "3"
        }, {
            source: "0",
            target: "4"
        }, {
            source: "0",
            target: "5"
        }, {
            source: "0",
            target: "7"
        }, {
            source: "0",
            target: "8"
        }, {
            source: "0",
            target: "9"
        }, {
            source: "0",
            target: "10"
        }, {
            source: "0",
            target: "11"
        }, {
            source: "0",
            target: "13"
        }, {
            source: "0",
            target: "14"
        }, {
            source: "0",
            target: "15"
        }, {
            source: "0",
            target: "16"
        }, {
            source: "2",
            target: "3"
        }, {
            source: "4",
            target: "5"
        }, {
            source: "4",
            target: "6"
        }, {
            source: "5",
            target: "6"
        }, {
            source: "7",
            target: "13"
        }, {
            source: "8",
            target: "14"
        }, {
            source: "9",
            target: "10"
        }, {
            source: "10",
            target: "22"
        }, {
            source: "10",
            target: "14"
        }, {
            source: "10",
            target: "12"
        }, {
            source: "10",
            target: "24"
        }, {
            source: "10",
            target: "21"
        }, {
            source: "10",
            target: "20"
        }, {
            source: "11",
            target: "24"
        }, {
            source: "11",
            target: "22"
        }, {
            source: "11",
            target: "14"
        }, {
            source: "12",
            target: "13"
        }, {
            source: "16",
            target: "17"
        }, {
            source: "16",
            target: "18"
        }, {
            source: "16",
            target: "21"
        }, {
            source: "16",
            target: "22"
        }, {
            source: "17",
            target: "18"
        }, {
            source: "17",
            target: "20"
        }, {
            source: "18",
            target: "19"
        }, {
            source: "19",
            target: "20"
        }, {
            source: "19",
            target: "33"
        }, {
            source: "19",
            target: "22"
        }, {
            source: "19",
            target: "23"
        }, {
            source: "20",
            target: "21"
        }, {
            source: "21",
            target: "22"
        }, {
            source: "22",
            target: "24"
        }, {
            source: "22",
            target: "25"
        }, {
            source: "22",
            target: "26"
        }, {
            source: "22",
            target: "23"
        }, {
            source: "22",
            target: "28"
        }, {
            source: "22",
            target: "30"
        }, {
            source: "22",
            target: "31"
        }, {
            source: "22",
            target: "32"
        }, {
            source: "22",
            target: "33"
        }, {
            source: "23",
            target: "28"
        }, {
            source: "23",
            target: "27"
        }, {
            source: "23",
            target: "29"
        }, {
            source: "23",
            target: "30"
        }, {
            source: "23",
            target: "31"
        }, {
            source: "23",
            target: "33"
        }, {
            source: "32",
            target: "33"
        }]
    };

    var colors = ['rgb(64, 174, 247)', 'rgb(108, 207, 169)', 'rgb(157, 223, 125)', 'rgb(240, 198, 74)', 'rgb(221, 158, 97)', 'rgb(141, 163, 112)', 'rgb(115, 136, 220)', 'rgb(133, 88, 219)', 'rgb(203, 135, 226)', 'rgb(227, 137, 163)'];

    var nodes = data.nodes;
    var clusterMap = new Map();
    var clusterId = 0;
    nodes.forEach(function(node) {
        // cluster
        if (node.cluster && clusterMap.get(node.cluster) === undefined) {
            clusterMap.set(node.cluster, clusterId);
            clusterId++;
        }
        var cid = clusterMap.get(node.cluster);
        if (node.style) {
            node.style.fill = colors[cid % colors.length];
        } else {
            node.style = {
                fill: colors[cid % colors.length]
            };
        }
    });
    var graph = new G6.Graph({
        container: 'mountNode',
        width: window.innerWidth,
        height: window.innerHeight,
        modes: {
            default: ['drag-canvas',{
                type: 'tooltip',
                formatText: function formatText(model) {
                    var text = 'description: ' + model.description;
                    return text;
                },

                shouldUpdate: function shouldUpdate(e) {
                    return true;
                }}, 'drag-node']
        },
        layout: {
            type: 'fruchterman',
            gravity: 1,
            speed: 5
        },
        animate: true,
        defaultNode: {
            size: [20, 20],
            color: 'steelblue',
            style: {
                lineWidth: 2,
                fill: '#fff'
            }
        },
        defaultEdge: {
            size: 1,
            color: '#e2e2e2',
            style: {
                endArrow: {
                    path: 'M 4,0 L -4,-4 L -4,4 Z',
                    d: 4
                }
            }
        }
    });
    graph.data(data);
    graph.render();

    var descriptionDiv = document.createElement("div");
    descriptionDiv.innerHTML = 'Fruchterman 布局，重力：1';
    var graphDiv = document.getElementById("mountNode");
    document.body.insertBefore(descriptionDiv, graphDiv);

    layoutConfigTranslation();

    var colors = ['rgb(64, 174, 247)', 'rgb(108, 207, 169)', 'rgb(157, 223, 125)', 'rgb(240, 198, 74)', 'rgb(221, 158, 97)', 'rgb(141, 163, 112)', 'rgb(115, 136, 220)', 'rgb(133, 88, 219)', 'rgb(203, 135, 226)', 'rgb(227, 137, 163)'];

    var nodes = data.nodes;
    var clusterMap = new Map();
    var clusterId = 0;
    nodes.forEach(function(node) {
        // cluster
        if (node.cluster && clusterMap.get(node.cluster) === undefined) {
            clusterMap.set(node.cluster, clusterId);
            clusterId++;
        }
        var cid = clusterMap.get(node.cluster);
        if (node.style) {
            node.style.fill = colors[cid % colors.length];
        } else {
            node.style = {
                fill: colors[cid % colors.length]
            };
        }
    });
    var graph = new G6.Graph({
        container: 'mountNode',
        width: window.innerWidth,
        height: window.innerHeight,
        modes: {
            default: ['drag-canvas', 'drag-node']
        },
        layout: {
            type: 'fruchterman',
            gravity: 1,
            speed: 5
        },
        animate: true,
        defaultNode: {
            size: [20, 20],
            color: 'steelblue',
            style: {
                lineWidth: 2,
                fill: '#fff'
            }
        },
        defaultEdge: {
            size: 1,
            color: '#e2e2e2',
            style: {
                endArrow: {
                    path: 'M 4,0 L -4,-4 L -4,4 Z',
                    d: 4
                }
            }
        }
    });
    graph.data(data);
    graph.render();

    var descriptionDiv = document.createElement("div");
    descriptionDiv.innerHTML = 'Fruchterman 布局，重力：1';
    var graphDiv = document.getElementById("mountNode");
    document.body.insertBefore(descriptionDiv, graphDiv);

    layoutConfigTranslation();
</script></body>
</html>
